execute as @e[tag=bluep,tag=portalambientloop] at @s if score Sound config matches 1 run playsound minecraft:portal_close_1 ambient @a ~ ~ ~
execute as @e[tag=bluep,tag=portalambientloop] at @s if score Sound config matches 2 run playsound minecraft:portal_close_2 ambient @a ~ ~ ~
kill @e[tag=bluep,tag=!portal_checker]
kill @e[tag=blueg]

execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=-5..5] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[0.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=5..15] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[10.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=15..25] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[20.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=25..35] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[30.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=35..45] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[40.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=45..55] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[50.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=55..65] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[60.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=65..75] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[70.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=75..85] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[80.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=85..95] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[90.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=95..105] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[100.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=105..115] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[110.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=115..125] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[120.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=125..135] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[130.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=135..145] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[140.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=145..155] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[150.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=155..165] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[160.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=165..175] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[170.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=175..-175] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[-180.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=-175..-165] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[-170.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=-165..-155] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[-160.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=-155..-145] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[-150.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=-145..-135] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[-140.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=-135..-125] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[-130.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=-125..-115] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[-120.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=-115..-105] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[-110.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=-105..-95] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[-100.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=-95..-85] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[-90.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=-85..-75] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[-80.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=-75..-65] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[-70.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=-65..-55] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[-60.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=-55..-45] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[-50.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=-45..-35] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[-40.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=-35..-25] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[-30.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=-25..-15] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[-20.0f,90.0f]}
execute as @e[tag=portal_checker_main,tag=blue,tag=ceiling,y_rotation=-15..-5] at @s run summon armor_stand ~ ~-0.8 ~ {Invisible:1b,Invulnerable:0b,PersistenceRequired:1b,NoBasePlate:1b,NoGravity:1b,ArmorItems:[{},{},{},{}],HandItems:[{},{}],DisabledSlots:2037535,Tags:["portal","portalambientloop","blueportal","ceiling","cnorth","bluep","no","hoverignore"],Rotation:[-10.0f,90.0f]}

execute at @e[tag=blueportal] run summon minecraft:area_effect_cloud ^0.49 ^0.99 ^-1.5 {Tags:["bluep","bluec","portal"],Rotation:[0.0f,90.0f],Duration:2147483639}
execute at @e[tag=blueportal] run summon minecraft:area_effect_cloud ^-0.49 ^0.99 ^-1.5 {Tags:["bluep","bluec","portal"],Rotation:[0.0f,90.0f],Duration:2147483639}
execute at @e[tag=blueportal] run summon minecraft:area_effect_cloud ^-0.49 ^ ^-1.5 {Tags:["bluep","bluec","portal"],Rotation:[0.0f,90.0f],Duration:2147483639}
execute at @e[tag=blueportal] run summon minecraft:area_effect_cloud ^0.49 ^ ^-1.5 {Tags:["bluep","bluec","portal"],Rotation:[0.0f,90.0f],Duration:2147483639}
execute at @e[tag=blueportal] run summon minecraft:area_effect_cloud ^0.49 ^-0.99 ^-1.5 {Tags:["bluep","bluec","portal"],Rotation:[0.0f,90.0f],Duration:2147483639}
execute at @e[tag=blueportal] run summon minecraft:area_effect_cloud ^-0.49 ^-0.99 ^-1.5 {Tags:["bluep","bluec","portal"],Rotation:[0.0f,90.0f],Duration:2147483639}

execute as @e[tag=bluep] at @e[tag=bluep] if score Sound config matches 1 run playsound minecraft:portal_open_1 ambient @a ~ ~ ~
execute as @e[tag=bluep] at @e[tag=bluep] if score Sound config matches 2 run playsound minecraft:portal_open_blue_2 ambient @a ~ ~ ~
kill @e[tag=portal_checker,distance=..2] 
